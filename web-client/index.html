<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RemotPhone â€” Ğ£Ğ´Ğ°Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --surface: #12121a;
    --surface-2: #1a1a26;
    --border: #2a2a3a;
    --accent: #6c5ce7;
    --accent-glow: rgba(108, 92, 231, 0.3);
    --green: #00d2a0;
    --red: #ff4757;
    --orange: #ffa726;
    --text: #e8e8f0;
    --text-dim: #888899;
    --radius: 12px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Outfit', sans-serif;
    background: var(--bg);
    color: var(--text);
    height: 100vh;
    overflow: hidden;
    display: flex;
  }

  /* â”€â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .sidebar {
    width: 280px;
    background: var(--surface);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
  }

  .logo {
    padding: 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .logo-icon {
    width: 36px; height: 36px;
    background: linear-gradient(135deg, var(--accent), #a29bfe);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px;
  }

  .logo h1 {
    font-size: 18px; font-weight: 600;
    background: linear-gradient(135deg, #e8e8f0, #a29bfe);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }

  .status-section {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
  }

  .status-badge {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px; font-weight: 500;
    font-family: 'JetBrains Mono', monospace;
  }

  .status-badge.offline { background: rgba(255,71,87,0.15); color: var(--red); }
  .status-badge.online { background: rgba(0,210,160,0.15); color: var(--green); }

  .status-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: currentColor;
  }

  .status-badge.online .status-dot {
    animation: pulse 2s ease infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  .device-info {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
  }

  .info-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 6px 0;
    font-size: 13px;
  }

  .info-label { color: var(--text-dim); }
  .info-value { font-family: 'JetBrains Mono', monospace; font-size: 12px; }

  .battery-bar {
    width: 40px; height: 14px;
    background: var(--surface-2);
    border-radius: 3px;
    border: 1.5px solid var(--text-dim);
    position: relative;
    display: inline-block;
    vertical-align: middle;
    margin-right: 6px;
  }

  .battery-bar::after {
    content: '';
    position: absolute; right: -5px; top: 3px;
    width: 3px; height: 6px;
    background: var(--text-dim);
    border-radius: 0 2px 2px 0;
  }

  .battery-fill {
    height: 100%; border-radius: 1px;
    transition: width 0.3s;
  }

  /* â”€â”€â”€ Nav tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .nav-tabs {
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
    overflow-y: auto;
  }

  .nav-tab {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.15s;
    border: none;
    background: none;
    color: var(--text-dim);
    width: 100%;
    text-align: left;
  }

  .nav-tab:hover { background: var(--surface-2); color: var(--text); }
  .nav-tab.active { background: var(--accent); color: white; }
  .nav-tab svg { width: 18px; height: 18px; flex-shrink: 0; }

  /* â”€â”€â”€ Main area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .toolbar {
    padding: 12px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--surface);
  }

  .tool-btn {
    width: 36px; height: 36px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--surface-2);
    color: var(--text-dim);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: all 0.15s;
  }

  .tool-btn:hover { border-color: var(--accent); color: var(--accent); }
  .tool-btn svg { width: 16px; height: 16px; }

  .tool-separator { width: 1px; height: 24px; background: var(--border); margin: 0 4px; }

  .content-area {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    overflow: auto;
    position: relative;
  }

  /* â”€â”€â”€ Connect screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .connect-screen {
    text-align: center;
    max-width: 400px;
  }

  .connect-screen h2 {
    font-size: 24px; font-weight: 600;
    margin-bottom: 8px;
  }

  .connect-screen p {
    color: var(--text-dim);
    margin-bottom: 24px;
    line-height: 1.6;
  }

  .code-input-group {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
  }

  .code-input {
    flex: 1;
    padding: 14px 18px;
    border-radius: var(--radius);
    border: 2px solid var(--border);
    background: var(--surface-2);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 20px;
    text-align: center;
    letter-spacing: 8px;
    outline: none;
    transition: border-color 0.2s;
  }

  .code-input:focus { border-color: var(--accent); }
  .code-input::placeholder { letter-spacing: 2px; font-size: 14px; color: var(--text-dim); }

  .connect-btn {
    width: 100%;
    padding: 14px;
    border-radius: var(--radius);
    border: none;
    background: linear-gradient(135deg, var(--accent), #a29bfe);
    color: white;
    font-family: 'Outfit', sans-serif;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
  }

  .connect-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 20px var(--accent-glow);
  }

  .connect-btn:disabled {
    opacity: 0.5; cursor: not-allowed; transform: none;
    box-shadow: none;
  }

  .server-input-row {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
  }

  .server-input {
    flex: 1;
    padding: 10px 14px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--surface-2);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    outline: none;
  }

  .server-input:focus { border-color: var(--accent); }

  /* â”€â”€â”€ Phone screen view â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .phone-frame {
    position: relative;
    background: #000;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 0 60px rgba(108, 92, 231, 0.15), 0 0 0 1px var(--border);
    cursor: crosshair;
  }

  .phone-frame canvas {
    display: block;
    width: 100%;
    height: 100%;
  }

  .no-stream-msg {
    position: absolute; inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    gap: 12px;
  }

  .no-stream-msg svg { width: 48px; height: 48px; opacity: 0.3; }

  /* â”€â”€â”€ Notification panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .panel {
    display: none;
    flex-direction: column;
    width: 100%;
    max-width: 600px;
    height: 100%;
  }

  .panel.active { display: flex; }

  .panel-header {
    font-size: 18px;
    font-weight: 600;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 16px;
  }

  .panel-content {
    flex: 1;
    overflow-y: auto;
  }

  .notif-card, .sms-card, .file-card, .app-card {
    padding: 14px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 8px;
    transition: border-color 0.15s;
  }

  .notif-card:hover, .sms-card:hover, .file-card:hover, .app-card:hover {
    border-color: var(--accent);
  }

  .notif-app {
    font-size: 11px;
    color: var(--accent);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }

  .notif-title { font-weight: 600; margin-bottom: 2px; }
  .notif-text { color: var(--text-dim); font-size: 13px; }
  .notif-time { color: var(--text-dim); font-size: 11px; margin-top: 6px; font-family: 'JetBrains Mono', monospace; }

  .file-card { display: flex; align-items: center; gap: 12px; cursor: pointer; }
  .file-icon { font-size: 24px; }
  .file-name { font-weight: 500; }
  .file-size { font-size: 12px; color: var(--text-dim); }

  .app-card { display: flex; align-items: center; gap: 12px; cursor: pointer; }
  .app-icon-placeholder {
    width: 40px; height: 40px;
    background: var(--surface-2);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px;
  }

  /* â”€â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .toast-container {
    position: fixed;
    top: 20px; right: 20px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .toast {
    padding: 12px 20px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    font-size: 13px;
    animation: slideIn 0.3s ease;
    max-width: 320px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.4);
  }

  .toast.success { border-left: 3px solid var(--green); }
  .toast.error { border-left: 3px solid var(--red); }
  .toast.info { border-left: 3px solid var(--accent); }

  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  /* â”€â”€â”€ SMS Compose â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .sms-compose {
    padding: 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 16px;
  }

  .sms-compose input, .sms-compose textarea {
    width: 100%;
    padding: 10px 14px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--surface-2);
    color: var(--text);
    font-family: 'Outfit', sans-serif;
    font-size: 14px;
    outline: none;
    margin-bottom: 8px;
  }

  .sms-compose textarea { height: 80px; resize: vertical; }
  .sms-compose input:focus, .sms-compose textarea:focus { border-color: var(--accent); }

  .sms-send-btn {
    padding: 8px 20px;
    border-radius: 8px;
    border: none;
    background: var(--accent);
    color: white;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
  }

  /* â”€â”€â”€ Clipboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .clipboard-area {
    width: 100%;
    max-width: 600px;
  }

  .clipboard-area textarea {
    width: 100%;
    height: 200px;
    padding: 16px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    outline: none;
    resize: vertical;
  }

  .clipboard-actions {
    display: flex; gap: 8px; margin-top: 12px;
  }

  .clipboard-actions button {
    padding: 10px 20px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
    transition: all 0.15s;
  }

  .clipboard-actions button:hover { border-color: var(--accent); }
  .clipboard-actions button.primary { background: var(--accent); border-color: var(--accent); color: white; }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--text-dim); }

  .hidden { display: none !important; }

  /* â”€â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width: 768px) {
    .sidebar { width: 60px; }
    .logo h1, .status-section, .device-info, .nav-tab span { display: none; }
    .nav-tab { justify-content: center; padding: 10px; }
    .logo { justify-content: center; padding: 16px 0; }
  }
</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <div class="logo">
    <div class="logo-icon">ğŸ“±</div>
    <h1>RemotPhone</h1>
  </div>

  <div class="status-section">
    <div class="status-badge offline" id="statusBadge">
      <div class="status-dot"></div>
      <span id="statusText">ĞĞµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾</span>
    </div>
  </div>

  <div class="device-info hidden" id="deviceInfo">
    <div class="info-row">
      <span class="info-label">Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾</span>
      <span class="info-value" id="deviceName">â€”</span>
    </div>
    <div class="info-row">
      <span class="info-label">Android</span>
      <span class="info-value" id="deviceAndroid">â€”</span>
    </div>
    <div class="info-row">
      <span class="info-label">Ğ‘Ğ°Ñ‚Ğ°Ñ€ĞµÑ</span>
      <span class="info-value" id="deviceBattery">
        <div class="battery-bar"><div class="battery-fill" id="batteryFill" style="width:0%;background:var(--green)"></div></div>
        <span id="batteryPct">â€”</span>
      </span>
    </div>
    <div class="info-row">
      <span class="info-label">Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ</span>
      <span class="info-value" id="deviceRes">â€”</span>
    </div>
  </div>

  <div class="nav-tabs">
    <button class="nav-tab active" data-tab="screen" onclick="switchTab('screen')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
      <span>Ğ­ĞºÑ€Ğ°Ğ½</span>
    </button>
    <button class="nav-tab" data-tab="notifications" onclick="switchTab('notifications')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
      <span>Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ</span>
    </button>
    <button class="nav-tab" data-tab="sms" onclick="switchTab('sms')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      <span>SMS</span>
    </button>
    <button class="nav-tab" data-tab="files" onclick="switchTab('files')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
      <span>Ğ¤Ğ°Ğ¹Ğ»Ñ‹</span>
    </button>
    <button class="nav-tab" data-tab="apps" onclick="switchTab('apps')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
      <span>ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ</span>
    </button>
    <button class="nav-tab" data-tab="clipboard" onclick="switchTab('clipboard')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
      <span>Ğ‘ÑƒÑ„ĞµÑ€ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ°</span>
    </button>
  </div>
</div>

<!-- Main -->
<div class="main">
  <!-- Toolbar -->
  <div class="toolbar hidden" id="toolbar">
    <button class="tool-btn" onclick="sendCommand('back')" title="ĞĞ°Ğ·Ğ°Ğ´">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
    </button>
    <button class="tool-btn" onclick="sendCommand('home')" title="Ğ”Ğ¾Ğ¼Ğ¾Ğ¹">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/></svg>
    </button>
    <button class="tool-btn" onclick="sendCommand('recents')" title="ĞĞµĞ´Ğ°Ğ²Ğ½Ğ¸Ğµ">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="5" width="14" height="14" rx="1"/></svg>
    </button>
    <div class="tool-separator"></div>
    <button class="tool-btn" onclick="sendCommand('volume_up')" title="Ğ“Ñ€Ğ¾Ğ¼ĞºĞ¾ÑÑ‚ÑŒ +">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19"/><line x1="15" y1="12" x2="19" y2="12"/><line x1="17" y1="10" x2="17" y2="14"/></svg>
    </button>
    <button class="tool-btn" onclick="sendCommand('volume_down')" title="Ğ“Ñ€Ğ¾Ğ¼ĞºĞ¾ÑÑ‚ÑŒ -">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19"/><line x1="15" y1="12" x2="19" y2="12"/></svg>
    </button>
    <div class="tool-separator"></div>
    <button class="tool-btn" onclick="requestScreenshot()" title="ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞºÑ€Ğ°Ğ½">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
    </button>
    <div style="flex:1"></div>
    <button class="tool-btn" onclick="disconnect()" title="ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ" style="border-color:var(--red);color:var(--red)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    </button>
  </div>

  <div class="content-area">
    <!-- Connect Screen -->
    <div class="connect-screen" id="connectScreen">
      <h2>ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñƒ</h2>
      <p>ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ RemotPhone Ğ½Ğ° Ğ²Ğ°ÑˆĞµĞ¼ Android-Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ Ğ¸ Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ 6-Ğ·Ğ½Ğ°Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ</p>

      <div class="server-input-row">
        <input type="text" class="server-input" id="serverUrl" placeholder="ĞĞ´Ñ€ĞµÑ ÑĞµÑ€Ğ²ĞµÑ€Ğ° (ws://192.168.1.X:3000)" value="">
      </div>

      <div class="code-input-group">
        <input type="text" class="code-input" id="codeInput" maxlength="6" placeholder="000000" inputmode="numeric">
      </div>
      <button class="connect-btn" id="connectBtn" onclick="connectToPhone()">
        ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ
      </button>
    </div>

    <!-- Screen View -->
    <div class="panel" id="screenPanel">
      <div class="phone-frame" id="phoneFrame">
        <canvas id="screenCanvas" width="1080" height="2340"></canvas>
        <div class="no-stream-msg" id="noStreamMsg">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="5" y="2" width="14" height="20" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>
          <span>ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½ÑĞ»ÑÑ†Ğ¸Ğ¸ ÑĞºÑ€Ğ°Ğ½Ğ°...</span>
          <small style="color:var(--text-dim);font-size:12px">ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Â«ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½ÑĞ»ÑÑ†Ğ¸ÑÂ» Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ</small>
        </div>
      </div>
    </div>

    <!-- Notifications Panel -->
    <div class="panel" id="notificationsPanel">
      <div class="panel-header">ğŸ”” Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ</div>
      <div class="panel-content" id="notifList">
        <div style="text-align:center;color:var(--text-dim);padding:40px">ĞĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹</div>
      </div>
    </div>

    <!-- SMS Panel -->
    <div class="panel" id="smsPanel">
      <div class="panel-header">ğŸ’¬ Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ</div>
      <div class="sms-compose">
        <input type="tel" id="smsTo" placeholder="ĞĞ¾Ğ¼ĞµÑ€ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°...">
        <textarea id="smsBody" placeholder="Ğ¢ĞµĞºÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ..."></textarea>
        <button class="sms-send-btn" onclick="sendSMS()">ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ SMS</button>
      </div>
      <div class="panel-content" id="smsList">
        <div style="text-align:center;color:var(--text-dim);padding:40px">ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ SMS</div>
      </div>
    </div>

    <!-- Files Panel -->
    <div class="panel" id="filesPanel">
      <div class="panel-header">ğŸ“‚ Ğ¤Ğ°Ğ¹Ğ»Ñ‹</div>
      <div class="panel-content" id="fileList">
        <div style="text-align:center;color:var(--text-dim);padding:40px">Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...</div>
      </div>
    </div>

    <!-- Apps Panel -->
    <div class="panel" id="appsPanel">
      <div class="panel-header">ğŸ“± ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ</div>
      <div class="panel-content" id="appList">
        <div style="text-align:center;color:var(--text-dim);padding:40px">Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...</div>
      </div>
    </div>

    <!-- Clipboard Panel -->
    <div class="panel" id="clipboardPanel">
      <div class="panel-header">ğŸ“‹ Ğ‘ÑƒÑ„ĞµÑ€ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ°</div>
      <div class="clipboard-area">
        <textarea id="clipboardText" placeholder="Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ Ğ±ÑƒÑ„ĞµÑ€Ğ° Ğ¾Ğ±Ğ¼ĞµĞ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°..."></textarea>
        <div class="clipboard-actions">
          <button onclick="getClipboard()">ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°</button>
          <button class="primary" onclick="setClipboard()">ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="toast-container" id="toastContainer"></div>

<script>
// â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let ws = null;
let connected = false;
let currentTab = 'screen';
const canvas = document.getElementById('screenCanvas');
const ctx = canvas.getContext('2d');
let phoneWidth = 1080, phoneHeight = 2340;

// â”€â”€â”€ Auto-detect server URL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function detectServer() {
  const loc = window.location;
  const proto = loc.protocol === 'https:' ? 'wss:' : 'ws:';
  document.getElementById('serverUrl').value = `${proto}//${loc.host}`;
})();

// â”€â”€â”€ Connection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function connectToPhone() {
  const url = document.getElementById('serverUrl').value.trim();
  const code = document.getElementById('codeInput').value.trim();

  if (!url) { showToast('Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ ÑĞµÑ€Ğ²ĞµÑ€Ğ°', 'error'); return; }
  if (code.length !== 6) { showToast('ĞšĞ¾Ğ´ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ 6 Ñ†Ğ¸Ñ„Ñ€', 'error'); return; }

  document.getElementById('connectBtn').disabled = true;
  document.getElementById('connectBtn').textContent = 'ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ...';

  try {
    ws = new WebSocket(url);
  } catch (e) {
    showToast('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº ÑĞµÑ€Ğ²ĞµÑ€Ñƒ', 'error');
    resetConnectBtn();
    return;
  }

  ws.binaryType = 'arraybuffer';

  ws.onopen = () => {
    ws.send(JSON.stringify({ type: 'pc_connect', code: code }));
  };

  ws.onmessage = (event) => {
    // Binary = screen frame
    if (event.data instanceof ArrayBuffer) {
      renderFrame(event.data);
      return;
    }

    let msg;
    try { msg = JSON.parse(event.data); } catch (e) { return; }

    switch (msg.type) {
      case 'connected':
        connected = true;
        setConnected(msg.deviceInfo);
        showToast('ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğº Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñƒ!', 'success');
        break;

      case 'error':
        showToast(msg.message, 'error');
        resetConnectBtn();
        break;

      case 'screen_frame':
        if (msg.data) {
          const img = new Image();
          img.onload = () => {
            canvas.width = img.width;
            canvas.height = img.height;
            phoneWidth = img.width;
            phoneHeight = img.height;
            ctx.drawImage(img, 0, 0);
            document.getElementById('noStreamMsg').classList.add('hidden');
            resizePhoneFrame();
          };
          img.src = 'data:image/jpeg;base64,' + msg.data;
        }
        break;

      case 'notification':
        addNotification(msg);
        break;

      case 'sms_list':
        renderSMSList(msg.messages || []);
        break;

      case 'file_list':
        renderFileList(msg.files || []);
        break;

      case 'app_list':
        renderAppList(msg.apps || []);
        break;

      case 'battery_info':
        updateBattery(msg.level, msg.charging);
        break;

      case 'device_info':
        updateDeviceInfo(msg);
        break;

      case 'clipboard_data':
        document.getElementById('clipboardText').value = msg.text || '';
        showToast('Ğ‘ÑƒÑ„ĞµÑ€ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½', 'info');
        break;

      case 'peer_disconnected':
        handleDisconnect();
        showToast('Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ğ»ÑÑ', 'error');
        break;

      case 'phone_status':
        if (msg.battery) updateBattery(msg.battery.level, msg.battery.charging);
        break;
    }
  };

  ws.onerror = () => {
    showToast('ĞÑˆĞ¸Ğ±ĞºĞ° WebSocket ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ', 'error');
    resetConnectBtn();
  };

  ws.onclose = () => {
    if (connected) {
      handleDisconnect();
      showToast('Ğ¡Ğ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½Ğ¾', 'error');
    }
    resetConnectBtn();
  };
}

function disconnect() {
  if (ws) ws.close();
  handleDisconnect();
}

function handleDisconnect() {
  connected = false;
  document.getElementById('statusBadge').className = 'status-badge offline';
  document.getElementById('statusText').textContent = 'ĞĞµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾';
  document.getElementById('deviceInfo').classList.add('hidden');
  document.getElementById('toolbar').classList.add('hidden');
  document.getElementById('connectScreen').style.display = '';
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
}

function setConnected(info) {
  document.getElementById('connectScreen').style.display = 'none';
  document.getElementById('statusBadge').className = 'status-badge online';
  document.getElementById('statusText').textContent = 'ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾';
  document.getElementById('deviceInfo').classList.remove('hidden');
  document.getElementById('toolbar').classList.remove('hidden');

  if (info) {
    document.getElementById('deviceName').textContent = info.model || info.device || 'Android';
    document.getElementById('deviceAndroid').textContent = info.androidVersion || 'â€”';
    if (info.screenWidth && info.screenHeight) {
      document.getElementById('deviceRes').textContent = `${info.screenWidth}Ã—${info.screenHeight}`;
      phoneWidth = info.screenWidth;
      phoneHeight = info.screenHeight;
    }
  }

  switchTab('screen');
  // Request initial data
  sendJSON({ type: 'request_info' });
  sendJSON({ type: 'request_battery' });
  sendJSON({ type: 'request_screen' });
}

function resetConnectBtn() {
  document.getElementById('connectBtn').disabled = false;
  document.getElementById('connectBtn').textContent = 'ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ';
}

// â”€â”€â”€ Sending â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function sendJSON(obj) {
  if (ws && ws.readyState === 1) ws.send(JSON.stringify(obj));
}

function sendCommand(type) {
  sendJSON({ type: type });
}

// â”€â”€â”€ Tab switching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function switchTab(tab) {
  currentTab = tab;
  document.querySelectorAll('.nav-tab').forEach(t => {
    t.classList.toggle('active', t.dataset.tab === tab);
  });
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  const panel = document.getElementById(tab + 'Panel');
  if (panel) panel.classList.add('active');

  // Request data on tab switch
  if (connected) {
    switch (tab) {
      case 'notifications': sendJSON({ type: 'request_notifications' }); break;
      case 'sms': sendJSON({ type: 'request_sms' }); break;
      case 'files': sendJSON({ type: 'request_files' }); break;
      case 'apps': sendJSON({ type: 'request_apps' }); break;
      case 'clipboard': sendJSON({ type: 'request_clipboard' }); break;
      case 'screen': sendJSON({ type: 'request_screen' }); break;
    }
  }
}

// â”€â”€â”€ Screen rendering â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderFrame(buffer) {
  const blob = new Blob([buffer], { type: 'image/jpeg' });
  const url = URL.createObjectURL(blob);
  const img = new Image();
  img.onload = () => {
    if (canvas.width !== img.width || canvas.height !== img.height) {
      canvas.width = img.width;
      canvas.height = img.height;
      phoneWidth = img.width;
      phoneHeight = img.height;
      resizePhoneFrame();
    }
    ctx.drawImage(img, 0, 0);
    URL.revokeObjectURL(url);
    document.getElementById('noStreamMsg').classList.add('hidden');
  };
  img.src = url;
}

function resizePhoneFrame() {
  const frame = document.getElementById('phoneFrame');
  const container = frame.parentElement;
  const maxH = container.clientHeight - 40;
  const maxW = container.clientWidth - 40;
  const ratio = phoneWidth / phoneHeight;
  let h = maxH;
  let w = h * ratio;
  if (w > maxW) {
    w = maxW;
    h = w / ratio;
  }
  frame.style.width = w + 'px';
  frame.style.height = h + 'px';
}

window.addEventListener('resize', resizePhoneFrame);

// â”€â”€â”€ Touch / Click on screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
canvas.addEventListener('click', (e) => {
  const rect = canvas.getBoundingClientRect();
  const scaleX = phoneWidth / rect.width;
  const scaleY = phoneHeight / rect.height;
  const x = Math.round((e.clientX - rect.left) * scaleX);
  const y = Math.round((e.clientY - rect.top) * scaleY);
  sendJSON({ type: 'touch', x, y, action: 'tap' });
});

// Swipe support
let touchStart = null;
canvas.addEventListener('mousedown', (e) => {
  const rect = canvas.getBoundingClientRect();
  touchStart = { x: e.clientX - rect.left, y: e.clientY - rect.top, time: Date.now() };
});

canvas.addEventListener('mouseup', (e) => {
  if (!touchStart) return;
  const rect = canvas.getBoundingClientRect();
  const dx = (e.clientX - rect.left) - touchStart.x;
  const dy = (e.clientY - rect.top) - touchStart.y;
  const dist = Math.sqrt(dx*dx + dy*dy);

  if (dist > 30) {
    const scaleX = phoneWidth / rect.width;
    const scaleY = phoneHeight / rect.height;
    sendJSON({
      type: 'swipe',
      startX: Math.round(touchStart.x * scaleX),
      startY: Math.round(touchStart.y * scaleY),
      endX: Math.round((e.clientX - rect.left) * scaleX),
      endY: Math.round((e.clientY - rect.top) * scaleY),
      duration: Math.min(Date.now() - touchStart.time, 1000)
    });
  }
  touchStart = null;
});

// Keyboard input
document.addEventListener('keydown', (e) => {
  if (!connected || currentTab !== 'screen') return;
  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

  e.preventDefault();
  if (e.key === 'Backspace') {
    sendJSON({ type: 'key', keyCode: 67 }); // KEYCODE_DEL
  } else if (e.key === 'Enter') {
    sendJSON({ type: 'key', keyCode: 66 }); // KEYCODE_ENTER
  } else if (e.key.length === 1) {
    sendJSON({ type: 'text_input', text: e.key });
  }
});

function requestScreenshot() {
  sendJSON({ type: 'request_screen' });
}

// â”€â”€â”€ Notifications â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const notifications = [];

function addNotification(notif) {
  notifications.unshift({
    app: notif.app || 'Unknown',
    title: notif.title || '',
    text: notif.text || '',
    time: new Date().toLocaleTimeString()
  });
  if (currentTab === 'notifications') renderNotifications();
  showToast(`${notif.app}: ${notif.title}`, 'info');
}

function renderNotifications() {
  const list = document.getElementById('notifList');
  if (notifications.length === 0) {
    list.innerHTML = '<div style="text-align:center;color:var(--text-dim);padding:40px">ĞĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹</div>';
    return;
  }
  list.innerHTML = notifications.map(n => `
    <div class="notif-card">
      <div class="notif-app">${esc(n.app)}</div>
      <div class="notif-title">${esc(n.title)}</div>
      <div class="notif-text">${esc(n.text)}</div>
      <div class="notif-time">${n.time}</div>
    </div>
  `).join('');
}

// â”€â”€â”€ SMS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSMSList(messages) {
  const list = document.getElementById('smsList');
  if (messages.length === 0) {
    list.innerHTML = '<div style="text-align:center;color:var(--text-dim);padding:40px">ĞĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹</div>';
    return;
  }
  list.innerHTML = messages.map(m => `
    <div class="sms-card">
      <div style="display:flex;justify-content:space-between;margin-bottom:4px">
        <strong>${esc(m.address || m.from || 'Unknown')}</strong>
        <small style="color:var(--text-dim)">${m.date ? new Date(m.date).toLocaleString() : ''}</small>
      </div>
      <div class="notif-text">${esc(m.body || '')}</div>
    </div>
  `).join('');
}

function sendSMS() {
  const to = document.getElementById('smsTo').value.trim();
  const body = document.getElementById('smsBody').value.trim();
  if (!to || !body) { showToast('Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ½Ğ¾Ğ¼ĞµÑ€ Ğ¸ Ñ‚ĞµĞºÑÑ‚', 'error'); return; }
  sendJSON({ type: 'send_sms', to, body });
  showToast('SMS Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾', 'success');
  document.getElementById('smsBody').value = '';
}

// â”€â”€â”€ Files â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderFileList(files) {
  const list = document.getElementById('fileList');
  if (files.length === 0) {
    list.innerHTML = '<div style="text-align:center;color:var(--text-dim);padding:40px">ĞĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²</div>';
    return;
  }
  list.innerHTML = files.map(f => `
    <div class="file-card" onclick="downloadFile('${esc(f.path)}')">
      <div class="file-icon">${f.isDir ? 'ğŸ“' : getFileIcon(f.name)}</div>
      <div>
        <div class="file-name">${esc(f.name)}</div>
        <div class="file-size">${f.size ? formatSize(f.size) : ''}</div>
      </div>
    </div>
  `).join('');
}

function downloadFile(path) {
  sendJSON({ type: 'download_file', path });
  showToast('Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°...', 'info');
}

function getFileIcon(name) {
  const ext = (name || '').split('.').pop().toLowerCase();
  const icons = { jpg:'ğŸ–¼ï¸', jpeg:'ğŸ–¼ï¸', png:'ğŸ–¼ï¸', gif:'ğŸ–¼ï¸', mp4:'ğŸ¬', mp3:'ğŸµ', pdf:'ğŸ“„', apk:'ğŸ“¦', zip:'ğŸ“¦', doc:'ğŸ“', txt:'ğŸ“' };
  return icons[ext] || 'ğŸ“„';
}

function formatSize(bytes) {
  if (bytes < 1024) return bytes + ' B';
  if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
  return (bytes / 1048576).toFixed(1) + ' MB';
}

// â”€â”€â”€ Apps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAppList(apps) {
  const list = document.getElementById('appList');
  if (apps.length === 0) {
    list.innerHTML = '<div style="text-align:center;color:var(--text-dim);padding:40px">ĞĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹</div>';
    return;
  }
  list.innerHTML = apps.map(a => `
    <div class="app-card" onclick="launchApp('${esc(a.packageName || a.package)}')">
      <div class="app-icon-placeholder">${a.icon ? `<img src="data:image/png;base64,${a.icon}" width="36" height="36" style="border-radius:8px">` : 'ğŸ“±'}</div>
      <div>
        <div style="font-weight:500">${esc(a.name || a.label || a.packageName)}</div>
        <div style="font-size:12px;color:var(--text-dim)">${esc(a.packageName || a.package || '')}</div>
      </div>
    </div>
  `).join('');
}

function launchApp(pkg) {
  sendJSON({ type: 'launch_app', packageName: pkg });
  showToast('Ğ—Ğ°Ğ¿ÑƒÑĞº ' + pkg, 'info');
  switchTab('screen');
}

// â”€â”€â”€ Clipboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getClipboard() {
  sendJSON({ type: 'request_clipboard' });
}

function setClipboard() {
  const text = document.getElementById('clipboardText').value;
  sendJSON({ type: 'set_clipboard', text });
  showToast('Ğ‘ÑƒÑ„ĞµÑ€ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½', 'success');
}

// â”€â”€â”€ Battery â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateBattery(level, charging) {
  const fill = document.getElementById('batteryFill');
  const pct = document.getElementById('batteryPct');
  if (level != null) {
    fill.style.width = level + '%';
    fill.style.background = level > 50 ? 'var(--green)' : level > 20 ? 'var(--orange)' : 'var(--red)';
    pct.textContent = level + '%' + (charging ? ' âš¡' : '');
  }
}

function updateDeviceInfo(info) {
  if (info.model) document.getElementById('deviceName').textContent = info.model;
  if (info.androidVersion) document.getElementById('deviceAndroid').textContent = info.androidVersion;
  if (info.screenWidth && info.screenHeight) {
    document.getElementById('deviceRes').textContent = `${info.screenWidth}Ã—${info.screenHeight}`;
  }
}

// â”€â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(msg, type = 'info') {
  const container = document.getElementById('toastContainer');
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.textContent = msg;
  container.appendChild(toast);
  setTimeout(() => toast.remove(), 4000);
}

// â”€â”€â”€ Utils â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function esc(s) {
  const div = document.createElement('div');
  div.textContent = s || '';
  return div.innerHTML;
}

// â”€â”€â”€ Enter key on code input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('codeInput').addEventListener('keydown', (e) => {
  if (e.key === 'Enter') connectToPhone();
});
</script>
</body>
</html>
